---
title: "ヘルプデスク支援エージェント"
tags: [基礎, 設計, 構成要素, パターン, フレームワーク, 全フェーズ, 開発, API]
created: 2026-02-25
updated: 2026-02-26
---

## ヘルプデスク業務の課題とAIエージェントの適用

ヘルプデスク業務では、問い合わせに対してマニュアルや過去のQAを検索し、回答を作成する一連のフローがあります。課題として、(1)マニュアルが膨大で必要な情報を探すのに時間がかかる、(2)過去のQAが散在しており再利用が難しい、(3)回答品質が担当者のスキルに依存する、があります。[[AIエージェント]]は、質問の分析→情報検索→回答生成を自律的に行い、担当者の負担を軽減します。単純なRAGと異なり、複数のサブタスクに分解して段階的に回答を組み立てる点がエージェントの強みです。

## Plan-and-Execute型エージェントの設計

[[Plan-and-Execute型]]は、まずユーザーの質問を分析してサブタスクの計画を立て、次にサブタスクを順次実行するパターンです。計画フェーズでは「この質問に答えるには何を調べる必要があるか」を分解します。例えば「VPN接続できない場合の対処法は？」→(1)VPN設定マニュアルを検索、(2)過去の類似QAを検索、(3)情報を統合して回答を作成。実行フェーズでは、計画の各サブタスクに対してツール選択→ツール実行→サブタスク回答を繰り返します。

## 検索ツールの作成とRAG

ヘルプデスクエージェントの中核となるのが検索ツールです。(1)マニュアル検索ツール：社内マニュアルをチャンクに分割し、[[Embedding API]]でベクトル化してベクトルDBに格納。質問に意味的に近い箇所を検索する。(2)過去QA検索ツール：過去の問い合わせと回答のペアを同様にベクトル化し、類似の質問を検索する。[[RAGとロングコンテキスト]]の使い分けも重要で、マニュアル全体が[[コンテキストウィンドウ]]に収まるならロングコンテキスト、収まらないならRAGが適しています。単純なRAGでは「特定の情報を一箇所から取得する」質問には強いですが、「複数の条件を組み合わせる」質問には弱い点に注意が必要です。

## LangGraphによる実装と改善

[[LangGraph]]で計画実行型エージェントを実装する場合、主要なノードは(1)計画作成、(2)ツール選択、(3)ツール実行、(4)サブタスク回答、(5)[[自己修正]]、(6)最終回答です。自己修正ノードでは、回答の品質を検証し、不十分な場合は計画を修正して再実行します。正確な回答が得られない場合の原因と対策として、計画不備（質問の分解が不適切→計画プロンプトの改善）、検索精度の問題（チャンクサイズの調整、メタデータフィルタリングの追加、検索クエリの書き換え）などがあります。

## 用語

- **RAG + Long Context（RAGとロングコンテキスト）**: RAG（検索拡張生成）とロングコンテキストモデルの使い分け・併用戦略。ロングコンテキストモデルは大量のテキストを直接入力できるが、コストが高い。RAGは必要な情報のみを検索するため効率的だが、検索精度に依存する。
