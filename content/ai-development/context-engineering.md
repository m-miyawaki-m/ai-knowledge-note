---
title: "コンテキストエンジニアリング"
tags: [実践, 基礎, 制約, 情報管理, 設計, 情報検索, 品質, リスク管理, プロンプト]
created: 2026-02-25
updated: 2026-02-25
---

## コンテキストの設計原則

[[コンテキストエンジニアリング]]とは、AIに「何を」「どの順で」「どの粒度で」伝えるかを戦略的に設計することです。[[コンテキストウィンドウ]]には限りがあるため、すべての情報を詰め込むことはできません。重要なのは情報の優先順位付けです。(1)直接関連するコード・仕様を最優先。(2)用語集やルールで文脈を補強。(3)参考情報は必要最小限に。情報が多すぎるとAIの注意が分散し、かえって出力品質が落ちます。「このタスクに必要十分な情報は何か」を常に問いかけましょう。

## ナレッジベースの構築と運用

プロジェクトの知識を体系的に管理する[[ナレッジベース]]は、AI活用の土台です。設計書、用語集、コーディング規約、過去の意思決定記録、よくある質問と回答をナレッジベースに蓄積します。[[RAG]]と組み合わせれば、AIが質問に応じて関連するナレッジを自動検索し、根拠のある回答を生成できます。ナレッジベースの情報は[[グラウンディング]]の役割も果たし、AIが「知らないことを知らない」と判断する助けになります。ナレッジの鮮度管理も重要で、古い情報が残っているとAIが誤った前提で回答するリスクがあります。

## 実践的なコンテキスト管理テクニック

日常の開発で使えるコンテキスト管理のテクニックを紹介します。「スコープの明示」：AIに作業対象のファイルやモジュールを明確に伝え、無関係な範囲に手を出させない。「段階的な情報提供」：最初に概要を伝え、AIの理解を確認してから詳細を追加する。「出力の再利用」：AIが生成した中間成果物（分析結果、設計案）を次のプロンプトのコンテキストとして活用する。「[[テンプレート]]のコンテキスト枠」：プロンプトテンプレートに「プロジェクト情報」「関連コード」「用語集」の記入枠を設け、毎回漏れなく必要な情報を含めるようにする。これらの工夫により、[[トークン制限]]の中で最大限の効果を引き出せます。

## 用語

- **Context Engineering（コンテキストエンジニアリング）**: AIに提供する情報（コンテキスト）の選定・構造化・順序設計を行う技術。限られたコンテキストウィンドウの中で、最も効果的な情報の組み合わせを設計し、出力品質を最大化する。
- **Context Window（コンテキストウィンドウ）**: AIモデルが一度に処理できるテキスト量の上限。設計書やコードを入力する際、この制限を意識して情報を分割・要約する必要がある。モデルにより数千〜数十万トークン。
- **Knowledge Base（ナレッジベース）**: プロジェクトの設計書、用語集、FAQ、意思決定記録等を体系的に蓄積・管理する仕組み。RAGの検索対象やグラウンディングの根拠として機能し、AIの出力品質の土台となる。
- **RAG (Retrieval-Augmented Generation)（検索拡張生成）**: 外部のドキュメントやデータベースから関連情報を検索し、その結果をプロンプトに含めてAIに回答させる手法。社内ドキュメントや過去の設計書を参照した回答が可能になる。
- **Grounding（グラウンディング）**: AIの出力を事実や根拠に基づかせる技術。用語集、設計書、公式ドキュメントなどの信頼できる情報源を提供し、AIが根拠のない推測を行うリスクを低減する。ハルシネーション対策の基本手法。
- **Prompt Template（プロンプトテンプレート）**: 繰り返し使うプロンプトの定型フォーマット。固定部分（役割設定、出力形式）と変数部分（対象コード、要件）を分離し、チームで共有することでAI活用の品質を均一化する。
- **Token Limit（トークン制限）**: AIモデルへの入力と出力の合計トークン数の上限。長大なコードや設計書を扱う際は、情報の取捨選択や分割が必要。設計粒度にも影響する制約。
